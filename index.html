<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"> <!-- Indica que usamos caracteres en español (acentos, ñ, etc.) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Hace que la página se adapte a celulares -->
    <title>Proyecto 2ndo Parcial</title>
    <link rel="stylesheet" href="style.css"> <!-- Enlaza el archivo CSS donde van los estilos -->
</head>
<body>
    <!-- ===== ENCABEZADO ===== -->
    <header class="shadow"> <!-- Sección superior con sombra -->
        <div class="container-logo">
            <img src="gato.jpg" alt="Un logo de la pagina">  <!-- Logo que aparece en el encabezado -->
        </div>
        <div>
            <button id="dark-mode">Dark Mode</button> <!-- Botón para activar/desactivar el modo oscuro -->
        </div>
    </header>

    <!-- ===== TÍTULO PRINCIPAL ===== -->
    <section class="container-title">
        <h1>🐾 Dogs 🐾</h1> <!-- Título principal de la página -->
    </section>

    <!-- ===== CONTENEDOR DE PERROS ===== -->
    <section id="paisaje-container"></section> <!-- Aquí se insertarán las imágenes de perros con JS -->

    <!-- ===== BOTÓN PARA CARGAR MÁS ===== -->
    <button id="load-more">Cargar más perros</button> <!-- Al hacer clic, carga más imágenes -->

    <!-- ===== PERRO ANIMADO EN ESQUINA ===== -->
    <div class="dog-container">
        <img src="ANI.gif" alt="Perro animado"> <!-- Imagen GIF de un perro animado -->
    </div>

    <!-- ===== AUDIO DEL LADRIDO ===== -->
    <audio id="bark-sound" src="ladrido.mp3"></audio> <!-- Sonido que se reproducirá al hacer clic en el perro -->

    <!-- ===== SCRIPT (CÓDIGO JAVASCRIPT) ===== -->
    <script>
        // ===== CARGAR IMÁGENES DE PERROS =====

        let page = 1; // Página inicial (para traer diferentes perros cada vez)

        // Función que pide imágenes de perros desde una API
        async function get_perros() {
            // Dirección del servicio que da fotos aleatorias de perros
            const url = `https://api.thedogapi.com/v1/images/search?limit=8&page=${page}`;
            
            // Pedimos los datos (esperamos a que el servidor responda)
            const respuesta = await fetch(url);
            
            // Convertimos la respuesta a formato JSON (lista de perros)
            const data = await respuesta.json();
            
            // Seleccionamos el contenedor donde vamos a poner las imágenes
            const contenedor = document.getElementById("paisaje-container");

            // Recorremos cada perro recibido
            data.forEach((elemento) => {
                const div = document.createElement("div"); // Creamos un div para cada perro
                div.classList.add("paisaje-element"); // Le damos una clase para estilos CSS

                const img = document.createElement("img"); // Creamos la imagen del perro
                img.src = elemento.url; // Asignamos la dirección de la imagen
                div.appendChild(img); // Metemos la imagen dentro del div

                const texto = document.createElement("p"); // Creamos un texto debajo
                texto.textContent = "🐾 Guau Guau número " + (contenedor.children.length + 1); // Contador automático
                div.appendChild(texto); // Lo añadimos al div

                contenedor.appendChild(div); // Finalmente, añadimos todo al contenedor principal
            });

            page++; // Aumentamos la página para que la siguiente carga muestre otros perros
        }

        // Llamamos a la función para cargar los primeros perros al abrir la página
        get_perros();

        // Cuando se presione el botón "Cargar más", llamamos otra vez la función
        document.getElementById("load-more").addEventListener("click", get_perros);

        // ===== MODO OSCURO =====
        const botonDark = document.getElementById("dark-mode"); // Seleccionamos el botón

        botonDark.addEventListener("click", function() { // Detectamos clic en el botón
            document.body.classList.toggle("dark-mode"); // Alternamos entre modo claro/oscuro
            // Cambiamos el texto del botón según el modo actual
            if (document.body.classList.contains("dark-mode")) {
                botonDark.textContent = "White Mode";
            } else {
                botonDark.textContent = "Dark Mode";
            }
        });

        // ===== VISOR DE IMAGEN GRANDE =====
        document.addEventListener("click", function(e) {
            // Verificamos si se hizo clic sobre una imagen de perro
            if (e.target.tagName === "IMG" && e.target.parentElement.classList.contains("paisaje-element")) {
                const fondo = document.createElement("div"); // Creamos un fondo oscuro
                fondo.classList.add("visor"); // Le damos una clase (para estilo oscuro)

                const grande = document.createElement("img"); // Creamos una imagen grande
                grande.src = e.target.src; // Le ponemos la misma imagen del clic
                fondo.appendChild(grande); // Metemos la imagen al fondo

                document.body.appendChild(fondo); // Mostramos el visor en la página

                // Si se hace clic en cualquier parte del visor, se cierra
                fondo.addEventListener("click", function() {
                    fondo.remove();
                });
            }
        });

        // ===== SONIDO DE LADRIDO =====
        const bark = document.getElementById("bark-sound"); // Tomamos el sonido
        const dog = document.querySelector(".dog-container"); // Tomamos el div del perro animado

        // Cuando se hace clic en el perro, suena el ladrido
        dog.addEventListener("click", function() {
            bark.currentTime = 0; // Si ya está sonando, lo reinicia
            bark.play(); // Reproduce el sonido
        });
    </script>

</body>
</html>
