<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto 2ndo Parcial</title>
    <!-- Enlazamos el CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ===== HEADER: Logo + Dark Mode ===== -->
    <header class="shadow">
        <div class="container-logo">
            <img src="gato.jpg" alt="Un logo de la pagina"> 
        </div>
        <div>
            <button id="dark-mode">Dark Mode </button>
        </div>
    </header>

    <!-- ===== T칈TULO PRINCIPAL ===== -->
    <section class="container-title">
        <h1>游 Dogs 游</h1>
    </section>

    <!-- ===== CONTENEDOR DE PERROS ===== -->
    <section class="paisaje" id="paisaje-container">
        <!-- Las im치genes de los perros se agregan aqu칤 con JavaScript -->
    </section>

    <!-- ===== BOT칍N CARGAR M츼S ===== -->
    <button id="load-more">Cargar m치s perros </button>
   
    <script>
        // ===== FUNCIONES DE CARGA =====
        // Muestra "Cargando..." mientras se traen im치genes
        function renderLoader (){
            const container = document.getElementById('paisaje-container');
            const loader = document.createElement('div');
            loader.setAttribute('id', 'loader');
            loader.innerHTML = 'Cargando...';
            container.appendChild(loader);
        }

        // Elimina el "Cargando..."
        function removeLoader(){
            const loader = document.getElementById('loader');
            if(loader) loader.remove();
        }

        // Variable para llevar la cuenta de la p치gina de la API
        let page = 1;

        // Funci칩n principal para traer los perros
        async function get_perros() {
            const url = `https://api.thedogapi.com/v1/images/search?limit=8&page=${page}`;
            renderLoader(); // mostrar texto de carga
            const response = await fetch(url); // traer datos de la API
            const data = await response.json(); // convertir datos a JSON
            const container = document.getElementById("paisaje-container");

            // Por cada perro recibido
            data.forEach(element => {
                // Crear un contenedor para cada perro
                const container_perro = document.createElement("div");
                container_perro.classList.add("paisaje-element");

                // Crear la imagen
                const img = document.createElement("img");
                img.src = element.url;
                container_perro.appendChild(img);

                // Crear la frase debajo de la imagen
                const texto = document.createElement("p");
                texto.textContent = "游 Guau Guau Numero " + (container.children.length + 1); // n칰mero autom치tico
                texto.classList.add("frase-perro"); // clase para el estilo
                container_perro.appendChild(texto);

                // Agregar el contenedor al main
                container.appendChild(container_perro);
            });

            removeLoader(); // quitar "Cargando..."
            page++; // aumentar p치gina para pr칩xima carga
        }

        // Cargar las primeras im치genes al iniciar
        get_perros();

        // ===== BOT칍N "CARGAR M츼S PERROS" =====
        const btn = document.getElementById("load-more");
        function loadMore(){
            get_perros(); // llama la misma funci칩n para traer m치s perros
        }
        btn.addEventListener("click", loadMore);

        // ===== MODO OSCURO =====
        const btnDarkMode = document.getElementById("dark-mode");
        function toggleDarkMode(){
            document.body.classList.toggle("dark-mode"); // agrega o quita la clase dark-mode
            if (document.body.classList.contains("dark-mode")){
                btnDarkMode.textContent= "White Mode"; // cambiar texto del bot칩n
            } else {
                btnDarkMode.textContent= "Dark Mode";
            }
        }
        btnDarkMode.addEventListener("click", toggleDarkMode);

        // ===== VISOR: Imagen grande al hacer clic =====
        document.addEventListener("click", function(e){
            // Verifica si se hizo clic en una imagen dentro de un paisaje-element
            if(e.target.tagName === "IMG" && e.target.parentElement.classList.contains("paisaje-element")){
                // Crear fondo oscuro
                const fondo = document.createElement("div");
                fondo.classList.add("visor");

                // Crear imagen grande
                const imgGrande = document.createElement("img");
                imgGrande.src = e.target.src; // misma imagen que clicaste
                fondo.appendChild(imgGrande);

                // Agregar al body
                document.body.appendChild(fondo);

                // Cerrar al hacer clic en cualquier parte del visor
                fondo.addEventListener("click", function(){
                    fondo.remove();
                });
            }
        });

    </script>

    <!-- ===== PERRO ANIMADO EN ESQUINA ===== -->
    <div class="dog-container">
        <img src="ANI.gif" alt="Perro animado">
    </div>

</body>
</html>
